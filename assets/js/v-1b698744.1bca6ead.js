"use strict";(self.webpackChunkcs_guide=self.webpackChunkcs_guide||[]).push([[49142],{66278:(a,e,r)=>{r.r(e),r.d(e,{data:()=>n});const n=JSON.parse('{"key":"v-1b698744","path":"/linux-tutor/server/Grafana-Install-And-Settings.html","title":"Grafana 安装和配置","lang":"zh-CN","frontmatter":{"summary":"Grafana 安装和配置 对于版本 支持的 Elasticsearch 版本; Grafana Docker 安装 官网：; ; 默认管理账号；admin，密码：admin，第一次登录后需要修改密码，也可以通过配置文件修改; ------------------------------------------------------------------","head":[["meta",{"property":"og:url","content":"https://yzqdev.github.io/cs-guide/cs-guide/linux-tutor/server/Grafana-Install-And-Settings.html"}],["meta",{"property":"og:site_name","content":"cs-guide"}],["meta",{"property":"og:title","content":"Grafana 安装和配置"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2022-06-04T21:01:43.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:modified_time","content":"2022-06-04T21:01:43.000Z"}]]},"excerpt":"","headers":[{"level":2,"title":"对于版本","slug":"对于版本","children":[]},{"level":2,"title":"Grafana Docker 安装","slug":"grafana-docker-安装","children":[]},{"level":2,"title":"Grafana 安装","slug":"grafana-安装","children":[]},{"level":2,"title":"配置","slug":"配置","children":[]},{"level":2,"title":"官网 dashboard","slug":"官网-dashboard","children":[]},{"level":2,"title":"数据源","slug":"数据源","children":[]},{"level":2,"title":"其他资料","slug":"其他资料","children":[]}],"git":{"createdTime":1653615455000,"updatedTime":1654376503000,"contributors":[{"name":"yzqdev","email":"yzqdev@outlook.com","commits":2}]},"readingTime":{"minutes":1.79,"words":537},"filePathRelative":"linux-tutor/server/Grafana-Install-And-Settings.md","localizedDate":"2022年5月27日"}')},70859:(a,e,r)=>{r.r(e),r.d(e,{default:()=>Wa});var n=r(66252);const l=(0,n._)("h1",{id:"grafana-安装和配置",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#grafana-安装和配置","aria-hidden":"true"},"#"),(0,n.Uk)(" Grafana 安装和配置")],-1),t=(0,n._)("h2",{id:"对于版本",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#对于版本","aria-hidden":"true"},"#"),(0,n.Uk)(" 对于版本")],-1),i={href:"http://docs.grafana.org/features/datasources/elasticsearch/#elasticsearch-version",target:"_blank",rel:"noopener noreferrer"},d=(0,n.Uk)("支持的 Elasticsearch 版本"),s=(0,n._)("h2",{id:"grafana-docker-安装",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#grafana-docker-安装","aria-hidden":"true"},"#"),(0,n.Uk)(" Grafana Docker 安装")],-1),o=(0,n.Uk)("官网："),c={href:"https://hub.docker.com/r/grafana/grafana/",target:"_blank",rel:"noopener noreferrer"},u=(0,n.Uk)("https://hub.docker.com/r/grafana/grafana/"),h=(0,n.uE)('<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>mkdir -p /data/docker/grafana/data\nchmod 777 -R /data/docker/grafana/data\n\ndocker run -d --name grafana -p 3000:3000 -v /data/docker/grafana/data:/var/lib/grafana grafana/grafana\n\ndocker exec -it grafana /bin/bash\n\n容器中默认的配置文件位置：/etc/grafana/grafana.ini\n复制出配置文件到宿主机：docker cp grafana:/etc/grafana/grafana.ini /Users/gitnavi/\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',1),g={href:"http://127.0.0.1:3000",target:"_blank",rel:"noopener noreferrer"},f=(0,n.Uk)("http://127.0.0.1:3000"),m=(0,n._)("li",null,"默认管理账号；admin，密码：admin，第一次登录后需要修改密码，也可以通过配置文件修改",-1),p=(0,n.uE)('<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[security]\nadmin_user = admin\nadmin_password = admin\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="grafana-安装" tabindex="-1"><a class="header-anchor" href="#grafana-安装" aria-hidden="true">#</a> Grafana 安装</h2>',3),_=(0,n._)("li",null,"CentOS 7.4",-1),b=(0,n._)("li",null,"rpm 文件包大小 53M",-1),k=(0,n._)("li",null,"所需内存：300M 左右",-1),v=(0,n.Uk)("官网下载："),U={href:"https://grafana.com/grafana/download?platform=linux",target:"_blank",rel:"noopener noreferrer"},x=(0,n.Uk)("https://grafana.com/grafana/download?platform=linux"),y=(0,n.Uk)("官网指导："),W={href:"http://docs.grafana.org/installation/rpm/",target:"_blank",rel:"noopener noreferrer"},G=(0,n.Uk)("http://docs.grafana.org/installation/rpm/"),w=(0,n.uE)('<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sudo yum install -y initscripts fontconfig urw-fonts\nwget https://dl.grafana.com/oss/release/grafana-5.4.0-1.x86_64.rpm \nsudo yum localinstall -y grafana-5.4.0-1.x86_64.rpm \n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>启动 Grafana 服务（默认是不启动的）</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sudo systemctl start grafana-server\nsudo systemctl status grafana-server\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>',3),E=(0,n._)("li",null,[(0,n.Uk)("将 Grafana 服务设置为开机启动："),(0,n._)("code",null,"sudo systemctl enable grafana-server")],-1),C=(0,n._)("li",null,[(0,n.Uk)("开放端口："),(0,n._)("code",null,"firewall-cmd --add-port=3000/tcp --permanent")],-1),z=(0,n._)("li",null,[(0,n.Uk)("重新加载防火墙配置："),(0,n._)("code",null,"firewall-cmd --reload")],-1),S=(0,n.Uk)("访问："),D={href:"http://192.168.0.105:3000",target:"_blank",rel:"noopener noreferrer"},N=(0,n.Uk)("http://192.168.0.105:3000"),T=(0,n._)("li",null,"默认管理账号；admin，密码：admin，登录后需要修改密码",-1),q=(0,n._)("hr",null,null,-1),I=(0,n._)("h2",{id:"配置",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#配置","aria-hidden":"true"},"#"),(0,n.Uk)(" 配置")],-1),A=(0,n.Uk)("官网指导："),Z={href:"http://docs.grafana.org/installation/configuration/",target:"_blank",rel:"noopener noreferrer"},B=(0,n.Uk)("http://docs.grafana.org/installation/configuration/"),H=(0,n.uE)("<li>安装包默认安装后的一些路径 <ul><li>二进制文件：<code>/usr/sbin/grafana-server</code></li><li>init.d 脚本：<code>/etc/init.d/grafana-server</code></li><li>配置文件：<code>/etc/grafana/grafana.ini</code></li><li>日志文件：<code>/var/log/grafana/grafana.log</code></li><li>插件目录是：<code>/var/lib/grafana/plugins</code></li><li>默认配置的 sqlite3 数据库：<code>/var/lib/grafana/grafana.db</code></li></ul></li><li>最重要的配置文件：<code>vim /etc/grafana/grafana.ini</code><ul><li>可以修改用户名和密码</li><li>端口</li><li>数据路径</li><li>数据库配置</li><li>第三方认证</li><li>Session 有效期</li></ul></li>",2),L=(0,n.Uk)("添加数据源："),M={href:"http://192.168.0.105:3000/datasources/new",target:"_blank",rel:"noopener noreferrer"},O=(0,n.Uk)("http://192.168.0.105:3000/datasources/new"),R=(0,n.Uk)("添加组织："),J={href:"http://192.168.0.105:3000/admin/orgs",target:"_blank",rel:"noopener noreferrer"},P=(0,n.Uk)("http://192.168.0.105:3000/admin/orgs"),j=(0,n.Uk)("添加用户："),F={href:"http://192.168.0.105:3000/org/users",target:"_blank",rel:"noopener noreferrer"},K=(0,n.Uk)("http://192.168.0.105:3000/org/users"),Q=(0,n.Uk)("添加插件："),V={href:"http://192.168.0.105:3000/plugins",target:"_blank",rel:"noopener noreferrer"},X=(0,n.Uk)("http://192.168.0.105:3000/plugins"),Y=(0,n.Uk)("个性化设置："),$={href:"http://192.168.0.105:3000/org",target:"_blank",rel:"noopener noreferrer"},aa=(0,n.Uk)("http://192.168.0.105:3000/org"),ea=(0,n.Uk)("软件变量："),ra={href:"http://192.168.0.105:3000/admin/settings",target:"_blank",rel:"noopener noreferrer"},na=(0,n.Uk)("http://192.168.0.105:3000/admin/settings"),la=(0,n._)("h2",{id:"官网-dashboard",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#官网-dashboard","aria-hidden":"true"},"#"),(0,n.Uk)(" 官网 dashboard")],-1),ta=(0,n.Uk)("dashboar仓库地址："),ia={href:"https://grafana.com/dashboards",target:"_blank",rel:"noopener noreferrer"},da=(0,n.Uk)("https://grafana.com/dashboards"),sa=(0,n._)("li",null,"本地可以通过输入 dashboard id 导入别人模板",-1),oa=(0,n.Uk)("打开："),ca={href:"http://192.168.0.105:3000/dashboard/import",target:"_blank",rel:"noopener noreferrer"},ua=(0,n.Uk)("http://192.168.0.105:3000/dashboard/import"),ha=(0,n._)("ul",null,[(0,n._)("li",null,"输入对应的 id，点击 Load 即可")],-1),ga=(0,n._)("h2",{id:"数据源",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#数据源","aria-hidden":"true"},"#"),(0,n.Uk)(" 数据源")],-1),fa=(0,n._)("h4",{id:"elasticsearch",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#elasticsearch","aria-hidden":"true"},"#"),(0,n.Uk)(" Elasticsearch")],-1),ma=(0,n._)("p",null,"使用：",-1),pa={href:"https://cloud.tencent.com/info/68052367407c3bf21cc10c0263027f3f.html",target:"_blank",rel:"noopener noreferrer"},_a=(0,n.Uk)("https://cloud.tencent.com/info/68052367407c3bf21cc10c0263027f3f.html"),ba={href:"http://docs.grafana.org/features/datasources/elasticsearch/#using-elasticsearch-in-grafana",target:"_blank",rel:"noopener noreferrer"},ka=(0,n.Uk)("http://docs.grafana.org/features/datasources/elasticsearch/#using-elasticsearch-in-grafana"),va=(0,n._)("h2",{id:"其他资料",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#其他资料","aria-hidden":"true"},"#"),(0,n.Uk)(" 其他资料")],-1),Ua={href:"https://blog.csdn.net/BianChengNinHao/article/details/80985302",target:"_blank",rel:"noopener noreferrer"},xa=(0,n.Uk)("https://blog.csdn.net/BianChengNinHao/article/details/80985302"),ya={},Wa=(0,r(83744).Z)(ya,[["render",function(a,e){const r=(0,n.up)("ExternalLinkIcon");return(0,n.wg)(),(0,n.iD)("div",null,[l,t,(0,n._)("ul",null,[(0,n._)("li",null,[(0,n._)("a",i,[d,(0,n.Wm)(r)])])]),s,(0,n._)("ul",null,[(0,n._)("li",null,[o,(0,n._)("a",c,[u,(0,n.Wm)(r)])])]),h,(0,n._)("ul",null,[(0,n._)("li",null,[(0,n._)("a",g,[f,(0,n.Wm)(r)])]),m]),p,(0,n._)("ul",null,[_,b,k,(0,n._)("li",null,[v,(0,n._)("a",U,[x,(0,n.Wm)(r)])]),(0,n._)("li",null,[y,(0,n._)("a",W,[G,(0,n.Wm)(r)])])]),w,(0,n._)("ul",null,[E,C,z,(0,n._)("li",null,[S,(0,n._)("a",D,[N,(0,n.Wm)(r)])]),T]),q,I,(0,n._)("ul",null,[(0,n._)("li",null,[A,(0,n._)("a",Z,[B,(0,n.Wm)(r)])]),H,(0,n._)("li",null,[L,(0,n._)("a",M,[O,(0,n.Wm)(r)])]),(0,n._)("li",null,[R,(0,n._)("a",J,[P,(0,n.Wm)(r)])]),(0,n._)("li",null,[j,(0,n._)("a",F,[K,(0,n.Wm)(r)])]),(0,n._)("li",null,[Q,(0,n._)("a",V,[X,(0,n.Wm)(r)])]),(0,n._)("li",null,[Y,(0,n._)("a",$,[aa,(0,n.Wm)(r)])]),(0,n._)("li",null,[ea,(0,n._)("a",ra,[na,(0,n.Wm)(r)])])]),la,(0,n._)("ul",null,[(0,n._)("li",null,[ta,(0,n._)("a",ia,[da,(0,n.Wm)(r)])]),sa,(0,n._)("li",null,[oa,(0,n._)("a",ca,[ua,(0,n.Wm)(r)]),ha])]),ga,fa,ma,(0,n._)("ul",null,[(0,n._)("li",null,[(0,n._)("a",pa,[_a,(0,n.Wm)(r)])]),(0,n._)("li",null,[(0,n._)("a",ba,[ka,(0,n.Wm)(r)])])]),va,(0,n._)("ul",null,[(0,n._)("li",null,[(0,n._)("a",Ua,[xa,(0,n.Wm)(r)])])])])}]])}}]);