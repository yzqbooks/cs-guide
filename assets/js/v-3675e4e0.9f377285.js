"use strict";(self.webpackChunkcs_guide=self.webpackChunkcs_guide||[]).push([[6172],{48039:(n,e,l)=>{l.r(e),l.d(e,{data:()=>i});const i=JSON.parse('{"key":"v-3675e4e0","path":"/linux-tutor/server/NTP.html","title":"NTP（Network Time Protocol）介绍","lang":"zh-CN","frontmatter":{"summary":"NTP（Network Time Protocol）介绍 NTP 安装 查看是否已安装：; CentOS：rpm -qa | grep ntp-*; Ubuntu：dpkg -l | grep ntp-*; 安装：; CentOS 6/7：sudo yum install -y ntp; Ubuntu：sudo apt-get install -y ntp;","head":[["meta",{"property":"og:url","content":"https://yzqdev.github.io/cs-guide/cs-guide/linux-tutor/server/NTP.html"}],["meta",{"property":"og:site_name","content":"cs-guide"}],["meta",{"property":"og:title","content":"NTP（Network Time Protocol）介绍"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2022-07-26T16:41:58.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:modified_time","content":"2022-07-26T16:41:58.000Z"}]]},"excerpt":"","headers":[{"level":2,"title":"NTP 安装","slug":"ntp-安装","children":[]},{"level":2,"title":"配置阿里云 NTP（推荐）","slug":"配置阿里云-ntp-推荐","children":[]},{"level":2,"title":"NTP 服务器配置文件常用参数","slug":"ntp-服务器配置文件常用参数","children":[]},{"level":2,"title":"NTP 资料","slug":"ntp-资料","children":[]}],"git":{"createdTime":1653615455000,"updatedTime":1658853718000,"contributors":[{"name":"yzqdev","email":"yzqdev@outlook.com","commits":2}]},"readingTime":{"minutes":2.18,"words":655},"filePathRelative":"linux-tutor/server/NTP.md","localizedDate":"2022年5月27日"}')},72282:(n,e,l)=>{l.r(e),l.d(e,{default:()=>z});var i=l(66252);const r=(0,i.uE)('<h1 id="ntp-network-time-protocol-介绍" tabindex="-1"><a class="header-anchor" href="#ntp-network-time-protocol-介绍" aria-hidden="true">#</a> NTP（Network Time Protocol）介绍</h1><h2 id="ntp-安装" tabindex="-1"><a class="header-anchor" href="#ntp-安装" aria-hidden="true">#</a> NTP 安装</h2><ul><li><p>查看是否已安装：</p></li><li><p>CentOS：<code>rpm -qa | grep ntp-*</code></p></li><li><p>Ubuntu：<code>dpkg -l | grep ntp-*</code></p></li><li><p>安装：</p></li><li><p>CentOS 6/7：<code>sudo yum install -y ntp</code></p></li><li><p>Ubuntu：<code>sudo apt-get install -y ntp</code></p></li></ul><h2 id="配置阿里云-ntp-推荐" tabindex="-1"><a class="header-anchor" href="#配置阿里云-ntp-推荐" aria-hidden="true">#</a> 配置阿里云 NTP（推荐）</h2>',4),o=(0,i.Uk)("官网介绍："),t={href:"https://help.aliyun.com/knowledge_detail/40583.html",target:"_blank",rel:"noopener noreferrer"},s=(0,i.Uk)("https://help.aliyun.com/knowledge_detail/40583.html"),d=(0,i._)("li",null,[(0,i.Uk)("配置文件介绍（记得先备份）："),(0,i._)("code",null,"sudo vim /etc/ntp.conf")],-1),u=(0,i._)("li",null,"注释掉以下默认的配置内容：",-1),c=(0,i.uE)('<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>server 0.centos.pool.ntp.org iburst\nserver 1.centos.pool.ntp.org iburst\nserver 2.centos.pool.ntp.org iburst\nserver 3.centos.pool.ntp.org iburst\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>新增配置：</li></ul><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code>ntp1.aliyun.com\nntp2.aliyun.com\nntp3.aliyun.com\nntp4.aliyun.com\nntp5.aliyun.com\nntp6.aliyun.com\nntp7.aliyun.com\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>CentOS 6 <ul><li>重启 NTP 服务：<code>sudo service ntpd start</code></li><li>添加 NTP 自启动：<code>sudo chkconfig ntpd on</code></li></ul></li><li>CentOS 7 <ul><li>重启 NTP 服务：<code>sudo systemctl start ntpd.service</code></li><li>添加 NTP 自启动：<code>sudo systemctl enable ntpd.service</code></li></ul></li></ul><h2 id="ntp-服务器配置文件常用参数" tabindex="-1"><a class="header-anchor" href="#ntp-服务器配置文件常用参数" aria-hidden="true">#</a> NTP 服务器配置文件常用参数</h2>',5),a=(0,i.Uk)("世界上可以校对时间节点："),p={href:"http://www.pool.ntp.org/zh",target:"_blank",rel:"noopener noreferrer"},m=(0,i.Uk)("http://www.pool.ntp.org/zh"),v=(0,i.Uk)("中国时间校对服务器节点："),b={href:"http://www.pool.ntp.org/zone/cn",target:"_blank",rel:"noopener noreferrer"},y=(0,i.Uk)("http://www.pool.ntp.org/zone/cn"),h=(0,i._)("li",null,[(0,i._)("p",null,[(0,i.Uk)("配置文件介绍（记得先备份）："),(0,i._)("code",null,"sudo vim /etc/ntp.conf")])],-1),g=(0,i._)("li",null,[(0,i._)("p",null,"该配置解释：")],-1),f=(0,i._)("li",null,[(0,i._)("p",null,"标注 1 是默认内容，我们这里进行了注释。")],-1),k=(0,i._)("li",null,[(0,i._)("p",null,"标注 2 是新增内容，表示使用中国时间校对服务器节点地址。")],-1),x=(0,i.uE)('<div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code>server 0.cn.pool.ntp.org\nserver 1.cn.pool.ntp.org\nserver 2.cn.pool.ntp.org\nserver 3.cn.pool.ntp.org\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>我的配置如下</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>driftfile  /var/lib/ntp/drift\npidfile    /var/run/ntpd.pid\nlogfile    /var/log/ntp.log\n\n\n# Access Control Support\nrestrict    default kod nomodify notrap nopeer noquery\nrestrict -6 default kod nomodify notrap nopeer noquery\nrestrict 127.0.0.1\nrestrict 192.168.0.0 mask 255.255.0.0 nomodify notrap nopeer noquery\nrestrict 172.16.0.0 mask 255.240.0.0 nomodify notrap nopeer noquery\nrestrict 100.64.0.0 mask 255.192.0.0 nomodify notrap nopeer noquery\nrestrict 10.0.0.0 mask 255.0.0.0 nomodify notrap nopeer noquery\n\n\n# local clock\nserver 127.127.1.0\nfudge  127.127.1.0 stratum 10\n\n\nrestrict ntp1.aliyun.com nomodify notrap nopeer noquery\nrestrict ntp1.cloud.aliyuncs.com nomodify notrap nopeer noquery\nrestrict ntp10.cloud.aliyuncs.com nomodify notrap nopeer noquery\nrestrict ntp11.cloud.aliyuncs.com nomodify notrap nopeer noquery\nrestrict ntp12.cloud.aliyuncs.com nomodify notrap nopeer noquery\nrestrict ntp2.aliyun.com nomodify notrap nopeer noquery\nrestrict ntp2.cloud.aliyuncs.com nomodify notrap nopeer noquery\nrestrict ntp3.aliyun.com nomodify notrap nopeer noquery\nrestrict ntp3.cloud.aliyuncs.com nomodify notrap nopeer noquery\nrestrict ntp4.aliyun.com nomodify notrap nopeer noquery\nrestrict ntp4.cloud.aliyuncs.com nomodify notrap nopeer noquery\nrestrict ntp5.aliyun.com nomodify notrap nopeer noquery\nrestrict ntp5.cloud.aliyuncs.com nomodify notrap nopeer noquery\nrestrict ntp6.aliyun.com nomodify notrap nopeer noquery\nrestrict ntp6.cloud.aliyuncs.com nomodify notrap nopeer noquery\nrestrict ntp7.cloud.aliyuncs.com nomodify notrap nopeer noquery\nrestrict ntp8.cloud.aliyuncs.com nomodify notrap nopeer noquery\nrestrict ntp9.cloud.aliyuncs.com nomodify notrap nopeer noquery\n\n\nserver ntp1.aliyun.com iburst minpoll 4 maxpoll 10\nserver ntp1.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10\nserver ntp10.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10\nserver ntp11.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10\nserver ntp12.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10\nserver ntp2.aliyun.com iburst minpoll 4 maxpoll 10\nserver ntp2.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10\nserver ntp3.aliyun.com iburst minpoll 4 maxpoll 10\nserver ntp3.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10\nserver ntp4.aliyun.com iburst minpoll 4 maxpoll 10\nserver ntp4.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10\nserver ntp5.aliyun.com iburst minpoll 4 maxpoll 10\nserver ntp5.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10\nserver ntp6.aliyun.com iburst minpoll 4 maxpoll 10\nserver ntp6.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10\nserver ntp7.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10\nserver ntp8.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10\nserver ntp9.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>启动服务：</p></li><li><p><code>sudo service ntpd stop</code>（改配置后，先停再启动）</p></li><li><p><code>sudo service ntpd start</code></p></li><li><p>手动更新时间：</p></li><li><p><code>sudo ntpdate ntp1.aliyun.com</code></p></li><li><p>服务加到启动项</p><ul><li>CentOS 系统：<code>sudo chkconfig ntpd on</code></li><li>Ubuntu 系统 <ul><li><code>sudo apt-get install -y sysv-rc-conf</code></li><li><code>sudo sysv-rc-conf ntpd on</code></li></ul></li></ul></li></ul><h2 id="ntp-资料" tabindex="-1"><a class="header-anchor" href="#ntp-资料" aria-hidden="true">#</a> NTP 资料</h2>',5),_={href:"http://www.jikexueyuan.com/course/1710.html",target:"_blank",rel:"noopener noreferrer"},w=(0,i.Uk)("http://www.jikexueyuan.com/course/1710.html"),q={href:"http://www.pool.ntp.org/zh",target:"_blank",rel:"noopener noreferrer"},T=(0,i.Uk)("http://www.pool.ntp.org/zh"),N={href:"http://blog.kissdata.com/2014/10/28/ubuntu-ntp.html",target:"_blank",rel:"noopener noreferrer"},P=(0,i.Uk)("http://blog.kissdata.com/2014/10/28/ubuntu-ntp.html"),U={},z=(0,l(83744).Z)(U,[["render",function(n,e){const l=(0,i.up)("ExternalLinkIcon");return(0,i.wg)(),(0,i.iD)("div",null,[r,(0,i._)("ul",null,[(0,i._)("li",null,[o,(0,i._)("a",t,[s,(0,i.Wm)(l)])]),d,u]),c,(0,i._)("ul",null,[(0,i._)("li",null,[(0,i._)("p",null,[a,(0,i._)("a",p,[m,(0,i.Wm)(l)])])]),(0,i._)("li",null,[(0,i._)("p",null,[v,(0,i._)("a",b,[y,(0,i.Wm)(l)])])]),h,g,f,k]),x,(0,i._)("ul",null,[(0,i._)("li",null,[(0,i._)("a",_,[w,(0,i.Wm)(l)])]),(0,i._)("li",null,[(0,i._)("a",q,[T,(0,i.Wm)(l)])]),(0,i._)("li",null,[(0,i._)("a",N,[P,(0,i.Wm)(l)])])])])}]])}}]);