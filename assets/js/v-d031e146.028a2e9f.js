"use strict";(self.webpackChunkcs_guide=self.webpackChunkcs_guide||[]).push([[54339],{80603:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e=JSON.parse('{"key":"v-d031e146","path":"/linux-tutor/configs/common-shells.html","title":"常用的shell","lang":"zh-CN","frontmatter":{"summary":"常用的shell crontab-redis-restart @code shell crontab-test @code shell file @code shell installcommontool_CentOS @code shell installcommontool_ubuntu @code shell installcommonvim @cod","head":[["meta",{"property":"og:url","content":"https://yzqdev.github.io/cs-guide/cs-guide/linux-tutor/configs/common-shells.html"}],["meta",{"property":"og:site_name","content":"cs-guide"}],["meta",{"property":"og:title","content":"常用的shell"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2022-05-26T11:39:36.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:modified_time","content":"2022-05-26T11:39:36.000Z"}]]},"excerpt":"","headers":[{"level":2,"title":"crontab-redis-restart","slug":"crontab-redis-restart","children":[]},{"level":2,"title":"crontab-test","slug":"crontab-test","children":[]},{"level":2,"title":"file","slug":"file","children":[]},{"level":2,"title":"install_common_tool_CentOS","slug":"install-common-tool-centos","children":[]},{"level":2,"title":"install_common_tool_ubuntu","slug":"install-common-tool-ubuntu","children":[]},{"level":2,"title":"install_common_vim","slug":"install-common-vim","children":[]},{"level":2,"title":"install_common_vim_zsh","slug":"install-common-vim-zsh","children":[]},{"level":2,"title":"install_docker_centos7","slug":"install-docker-centos7","children":[]},{"level":2,"title":"install_docker_disable_firewalld_centos7-aliyun","slug":"install-docker-disable-firewalld-centos7-aliyun","children":[]},{"level":2,"title":"install_docker_disable_firewalld_centos7","slug":"install-docker-disable-firewalld-centos7","children":[]},{"level":2,"title":"install_docker_k8s_disable_firewalld_centos7-aliyun","slug":"install-docker-k8s-disable-firewalld-centos7-aliyun","children":[]},{"level":2,"title":"install_jdk_offline_to_bash","slug":"install-jdk-offline-to-bash","children":[]},{"level":2,"title":"install_jdk_offline_to_zsh","slug":"install-jdk-offline-to-zsh","children":[]},{"level":2,"title":"install_jdk_online","slug":"install-jdk-online","children":[]},{"level":2,"title":"install_maven_offline_to_bash","slug":"install-maven-offline-to-bash","children":[]},{"level":2,"title":"install_maven_offline_to_zsh","slug":"install-maven-offline-to-zsh","children":[]},{"level":2,"title":"install_mycat_offline","slug":"install-mycat-offline","children":[]},{"level":2,"title":"install_mysql5.6_offline_centos6","slug":"install-mysql5-6-offline-centos6","children":[]},{"level":2,"title":"install_mysql5.6_offline_centos7","slug":"install-mysql5-6-offline-centos7","children":[]},{"level":2,"title":"install_mysql5.7_offline_centos7","slug":"install-mysql5-7-offline-centos7","children":[]},{"level":2,"title":"install_nginx_centos6","slug":"install-nginx-centos6","children":[]},{"level":2,"title":"install_nginx_centos7","slug":"install-nginx-centos7","children":[]},{"level":2,"title":"install_redis_centos6","slug":"install-redis-centos6","children":[]},{"level":2,"title":"install_redis_centos7","slug":"install-redis-centos7","children":[]},{"level":2,"title":"install_tomcat_centos6","slug":"install-tomcat-centos6","children":[]},{"level":2,"title":"install_tomcat_centos7","slug":"install-tomcat-centos7","children":[]},{"level":2,"title":"install_tomcat_offline_centos7","slug":"install-tomcat-offline-centos7","children":[]},{"level":2,"title":"mysql_backup","slug":"mysql-backup","children":[]},{"level":2,"title":"repo_install_centos6","slug":"repo-install-centos6","children":[]},{"level":2,"title":"shell-for","slug":"shell-for","children":[]},{"level":2,"title":"shell-with-param-demo","slug":"shell-with-param-demo","children":[]}],"git":{"createdTime":1653565176000,"updatedTime":1653565176000,"contributors":[{"name":"yzqdev","email":"yzqdev@outlook.com","commits":1}]},"readingTime":{"minutes":0.69,"words":208},"filePathRelative":"linux-tutor/configs/common-shells.md","localizedDate":"2022年5月26日"}')},55159:(n,s,a)=>{a.r(s),a.d(s,{default:()=>t});var e=a(66252);const i=[(0,e.uE)('<h1 id="常用的shell" tabindex="-1"><a class="header-anchor" href="#常用的shell" aria-hidden="true">#</a> 常用的shell</h1><h2 id="crontab-redis-restart" tabindex="-1"><a class="header-anchor" href="#crontab-redis-restart" aria-hidden="true">#</a> crontab-redis-restart</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\nredis-cli -h <span class="token number">127.0</span>.0.1 -p <span class="token number">6379</span> -a <span class="token number">123456789</span> <span class="token function">shutdown</span>\n\n<span class="token function">sleep</span> 5s\n\n/usr/local/bin/redis-server /etc/redis.conf\n\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="crontab-test" tabindex="-1"><a class="header-anchor" href="#crontab-test" aria-hidden="true">#</a> crontab-test</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token assign-left variable">time1</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> <span class="token string">&quot;+%Y-%m-%d %H:%M:%S&quot;</span><span class="token variable">)</span></span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${time1}</span>&quot;</span> <span class="token operator">&gt;&gt;</span> /opt/1.txt\n\n<span class="token function">sleep</span> 5s\n\n<span class="token assign-left variable">time2</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> <span class="token string">&quot;+%Y-%m-%d %H:%M:%S&quot;</span><span class="token variable">)</span></span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${time2}</span>&quot;</span> <span class="token operator">&gt;&gt;</span> /opt/1.txt\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="file" tabindex="-1"><a class="header-anchor" href="#file" aria-hidden="true">#</a> file</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">import</span> fs from <span class="token string">&quot;fs&quot;</span><span class="token punctuation">;</span>\n\nfs.readdir<span class="token punctuation">(</span><span class="token string">&quot;./&quot;</span>, <span class="token keyword">function</span> <span class="token punctuation">(</span>err, files<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console.log<span class="token punctuation">(</span><span class="token string">&quot;Error&quot;</span>, err<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n    <span class="token builtin class-name">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">for</span> <span class="token punctuation">(</span>let item of files<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token builtin class-name">let</span> str <span class="token operator">=</span> <span class="token variable"><span class="token variable">`</span><span class="token comment">## ${item}</span><span class="token variable">`</span></span><span class="token punctuation">;</span>\n      arr.push<span class="token punctuation">(</span>str.slice<span class="token punctuation">(</span><span class="token number">0</span>, str.length - <span class="token number">3</span><span class="token punctuation">)</span> + <span class="token variable"><span class="token variable">`</span><span class="token punctuation">\\</span>n<span class="token variable">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      arr.push<span class="token punctuation">(</span><span class="token variable"><span class="token variable">`</span>@<span class="token punctuation">[</span>code shell<span class="token punctuation">]</span><span class="token punctuation">(</span>./shells/$<span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">\\</span>n<span class="token punctuation">\\</span>n<span class="token variable">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    console.log<span class="token punctuation">(</span>arr.join<span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">))</span><span class="token punctuation">;</span>\n    fs.writeFileSync<span class="token punctuation">(</span><span class="token string">&quot;a.md&quot;</span>, arr.join<span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">))</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-common-tool-centos" tabindex="-1"><a class="header-anchor" href="#install-common-tool-centos" aria-hidden="true">#</a> install_common_tool_CentOS</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;开始常用工具安装&quot;</span>\n\nyum <span class="token function">install</span> -y <span class="token function">zip</span> <span class="token function">unzip</span> lrzsz <span class="token function">git</span> epel-release <span class="token function">wget</span> <span class="token function">htop</span> deltarpm\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;开始常用工具结束&quot;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-common-tool-ubuntu" tabindex="-1"><a class="header-anchor" href="#install-common-tool-ubuntu" aria-hidden="true">#</a> install_common_tool_ubuntu</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;开始常用工具安装&quot;</span>\n\n<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y <span class="token function">zip</span> <span class="token function">unzip</span> <span class="token function">unrar</span> lrzsz <span class="token function">git</span> <span class="token function">wget</span> <span class="token function">htop</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;开始常用工具结束&quot;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-common-vim" tabindex="-1"><a class="header-anchor" href="#install-common-vim" aria-hidden="true">#</a> install_common_vim</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------开始常用工具安装&quot;</span>\nyum <span class="token function">install</span> -y <span class="token function">zip</span> <span class="token function">unzip</span> lrzsz <span class="token function">git</span> epel-release\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------开始安装 vim&quot;</span>\nyum <span class="token function">install</span> -y <span class="token function">vim</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------设置 vim 配置&quot;</span>\n<span class="token function">curl</span> https://raw.githubusercontent.com/wklken/vim-for-server/master/vimrc <span class="token operator">&gt;</span> ~/.vimrc\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-common-vim-zsh" tabindex="-1"><a class="header-anchor" href="#install-common-vim-zsh" aria-hidden="true">#</a> install_common_vim_zsh</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------禁用防火墙&quot;</span>\nsystemctl stop firewalld.service\nsystemctl disable firewalld.service\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------开始常用工具安装&quot;</span>\nyum <span class="token function">install</span> -y <span class="token function">zip</span> <span class="token function">unzip</span> lrzsz <span class="token function">git</span> epel-release\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------开始常用工具结束&quot;</span>\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------开始安装 zsh&quot;</span>\nyum <span class="token function">install</span> -y <span class="token function">zsh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------开始安装 oh-my-zsh&quot;</span>\n<span class="token function">wget</span> https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O - <span class="token operator">|</span> <span class="token function">sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------设置默认终端为 oh-my-zsh&quot;</span>\nchsh -s /bin/zsh root\n\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------开始安装 vim&quot;</span>\nyum <span class="token function">install</span> -y <span class="token function">vim</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------设置 vim 配置&quot;</span>\n<span class="token function">curl</span> https://raw.githubusercontent.com/wklken/vim-for-server/master/vimrc <span class="token operator">&gt;</span> ~/.vimrc\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-docker-centos7" tabindex="-1"><a class="header-anchor" href="#install-docker-centos7" aria-hidden="true">#</a> install_docker_centos7</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装 docker 所需环境&quot;</span>\n\nyum <span class="token function">install</span> -y yum-utils device-mapper-persistent-data lvm2\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;添加 repo（可能网络会很慢，有时候会报：Timeout，所以要多试几次）&quot;</span>\n\nyum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\nyum makecache fast\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;开始安装 docker&quot;</span>\n\nyum <span class="token function">install</span> -y docker-ce\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;启动 Docker&quot;</span>\n\nsystemctl start docker.service\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装结束&quot;</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;运行 hello world 镜像&quot;</span>\n\n<span class="token function">docker</span> run hello-world\n\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装 docker compose&quot;</span>\n\n<span class="token function">curl</span> -L https://github.com/docker/compose/releases/download/1.18.0/docker-compose-<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> -s<span class="token variable">`</span></span>-<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> -m<span class="token variable">`</span></span> -o /usr/local/bin/docker-compose\n\n<span class="token function">chmod</span> +x /usr/local/bin/docker-compose\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;输出 docker compose 版本号&quot;</span>\n\n<span class="token function">docker-compose</span> --version\nsystemctl restart docker.service\nsystemctl <span class="token builtin class-name">enable</span> docker.service\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-docker-disable-firewalld-centos7-aliyun" tabindex="-1"><a class="header-anchor" href="#install-docker-disable-firewalld-centos7-aliyun" aria-hidden="true">#</a> install_docker_disable_firewalld_centos7-aliyun</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------禁用防火墙&quot;</span>\nsystemctl stop firewalld.service\nsystemctl disable firewalld.service\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------安装 docker 所需环境&quot;</span>\n\nyum <span class="token function">install</span> -y yum-utils device-mapper-persistent-data lvm2\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------添加 repo（可能网络会很慢，有时候会报：Timeout，所以要多试几次）&quot;</span>\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------官网的地址 yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo&quot;</span>\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------这里用阿里云进行加速，不然可能会出现无法安装，阿里云官网说明：https://help.aliyun.com/document_detail/60742.html&quot;</span>\n\nyum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\nyum makecache fast\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------开始安装 docker&quot;</span>\n\nyum <span class="token function">install</span> -y docker-ce\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------启动 Docker&quot;</span>\n\nsystemctl start docker.service\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------安装结束&quot;</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------docker 加速&quot;</span>\n\n<span class="token function">touch</span> /etc/docker/daemon.json\n\n<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;&gt;</span> /etc/docker/daemon.json</span>\n{\n  &quot;registry-mirrors&quot;: [&quot;https://ldhc17y9.mirror.aliyuncs.com&quot;]\n}\nEOF</span>\n\nsystemctl daemon-reload\nsystemctl restart <span class="token function">docker</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------运行 hello world 镜像&quot;</span>\n\n<span class="token function">docker</span> run hello-world\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------安装 docker compose&quot;</span>\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;docker compose 的版本检查：https://docs.docker.com/compose/install/#install-compose&quot;</span>\n\n<span class="token function">curl</span> -L <span class="token string">&quot;https://github.com/docker/compose/releases/download/1.23.1/docker-compose-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> -s<span class="token variable">)</span></span>-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> -m<span class="token variable">)</span></span>&quot;</span> -o /usr/local/bin/docker-compose\n\n<span class="token function">chmod</span> +x /usr/local/bin/docker-compose\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------输出 docker compose 版本号&quot;</span>\n\n<span class="token function">docker-compose</span> --version\n\n\n\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-docker-disable-firewalld-centos7" tabindex="-1"><a class="header-anchor" href="#install-docker-disable-firewalld-centos7" aria-hidden="true">#</a> install_docker_disable_firewalld_centos7</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------禁用防火墙&quot;</span>\nsystemctl stop firewalld.service\nsystemctl disable firewalld.service\n\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------安装 docker 所需环境&quot;</span>\n\nyum <span class="token function">install</span> -y yum-utils device-mapper-persistent-data lvm2\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------添加 repo（可能网络会很慢，有时候会报：Timeout，所以要多试几次）&quot;</span>\n\nyum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\nyum makecache fast\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------开始安装 docker&quot;</span>\n\nyum <span class="token function">install</span> -y docker-ce\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------启动 Docker&quot;</span>\n\nsystemctl start docker.service\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------安装结束&quot;</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------运行 hello world 镜像&quot;</span>\n\n<span class="token function">docker</span> run hello-world\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------安装 docker compose&quot;</span>\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;docker compose 的版本检查：https://docs.docker.com/compose/install/#install-compose&quot;</span>\n\n<span class="token function">curl</span> -L https://github.com/docker/compose/releases/download/1.21.2/docker-compose-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> -s<span class="token variable">)</span></span>-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> -m<span class="token variable">)</span></span> -o /usr/local/bin/docker-compose\n\n<span class="token function">chmod</span> +x /usr/local/bin/docker-compose\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------输出 docker compose 版本号&quot;</span>\n\n<span class="token function">docker-compose</span> --version\nsystemctl restart docker.service\nsystemctl <span class="token builtin class-name">enable</span> docker.service\n\n\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-docker-k8s-disable-firewalld-centos7-aliyun" tabindex="-1"><a class="header-anchor" href="#install-docker-k8s-disable-firewalld-centos7-aliyun" aria-hidden="true">#</a> install_docker_k8s_disable_firewalld_centos7-aliyun</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------禁用防火墙&quot;</span>\nsystemctl stop firewalld.service\nsystemctl disable firewalld.service\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------安装 docker 所需环境&quot;</span>\n\nyum <span class="token function">install</span> -y yum-utils device-mapper-persistent-data lvm2\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------添加 repo（可能网络会很慢，有时候会报：Timeout，所以要多试几次）&quot;</span>\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------官网的地址 yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo&quot;</span>\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------这里用阿里云进行加速，不然可能会出现无法安装，阿里云官网说明：https://help.aliyun.com/document_detail/60742.html&quot;</span>\n\nyum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\nyum makecache fast\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------开始安装 docker&quot;</span>\n\nyum <span class="token function">install</span> -y docker-ce-18.06.1.ce-3.el7\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------启动 Docker&quot;</span>\n\nsystemctl start docker.service\nsystemctl <span class="token builtin class-name">enable</span> docker.service\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------安装结束&quot;</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------docker 加速&quot;</span>\n\n<span class="token function">touch</span> /etc/docker/daemon.json\n\n<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;&gt;</span> /etc/docker/daemon.json</span>\n{\n  &quot;registry-mirrors&quot;: [&quot;https://ldhc17y9.mirror.aliyuncs.com&quot;]\n}\nEOF</span>\n\nsystemctl daemon-reload\nsystemctl restart <span class="token function">docker</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;-----------------------------------------运行 hello world 镜像&quot;</span>\n\n<span class="token function">docker</span> run hello-world\n\n\n\n\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-jdk-offline-to-bash" tabindex="-1"><a class="header-anchor" href="#install-jdk-offline-to-bash" aria-hidden="true">#</a> install_jdk_offline_to_bash</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断常见的文件夹是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> /opt/setups\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断 JDK 压缩包是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -f <span class="token string">&quot;/opt/setups/jdk-8u181-linux-x64.tar.gz&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;JDK 压缩包不存在&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;开始解压 JDK&quot;</span>\n<span class="token builtin class-name">cd</span> /opt/setups <span class="token punctuation">;</span> <span class="token function">tar</span> -zxf jdk-8u181-linux-x64.tar.gz\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups/jdk1.8.0_181&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;JDK 解压失败，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;JDK 解压包移到 /usr/local/ 目录下&quot;</span>\n<span class="token function">mv</span> jdk1.8.0_181/ /usr/local/\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;JDK 写入系统变量到 profile&quot;</span>\n\n<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;&gt;</span> /etc/profile</span>\n\n# JDK\nJAVA_HOME=/usr/local/jdk1.8.0_181\nJRE_HOME=\\<span class="token variable">$JAVA_HOME</span>/jre\nPATH=\\<span class="token environment constant">$PATH</span>:\\<span class="token variable">$JAVA_HOME</span>/bin\nCLASSPATH=.:\\<span class="token variable">$JAVA_HOME</span>/lib/dt.jar:\\<span class="token variable">$JAVA_HOME</span>/lib/tools.jar\nexport JAVA_HOME\nexport JRE_HOME\nexport PATH\nexport CLASSPATH\n\nEOF</span>\n\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;JDK 设置完成，需要你手动设置：source /etc/profile&quot;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-jdk-offline-to-zsh" tabindex="-1"><a class="header-anchor" href="#install-jdk-offline-to-zsh" aria-hidden="true">#</a> install_jdk_offline_to_zsh</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断常见的文件夹是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> /opt/setups\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断 JDK 压缩包是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -f <span class="token string">&quot;/opt/setups/jdk-8u191-linux-x64.tar.gz&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;JDK 压缩包不存在&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;开始解压 JDK&quot;</span>\n<span class="token builtin class-name">cd</span> /opt/setups <span class="token punctuation">;</span> <span class="token function">tar</span> -zxf jdk-8u191-linux-x64.tar.gz\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups/jdk1.8.0_191&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;JDK 解压失败，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;JDK 解压包移到 /usr/local/ 目录下&quot;</span>\n<span class="token function">mv</span> jdk1.8.0_191/ /usr/local/\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;JDK 写入系统变量到 zshrc&quot;</span>\n\n<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;&gt;</span> ~/.zshrc</span>\n\n# JDK\nJAVA_HOME=/usr/local/jdk1.8.0_191\nJRE_HOME=\\<span class="token variable">$JAVA_HOME</span>/jre\nPATH=\\<span class="token environment constant">$PATH</span>:\\<span class="token variable">$JAVA_HOME</span>/bin\nCLASSPATH=.:\\<span class="token variable">$JAVA_HOME</span>/lib/dt.jar:\\<span class="token variable">$JAVA_HOME</span>/lib/tools.jar\nexport JAVA_HOME\nexport JRE_HOME\nexport PATH\nexport CLASSPATH\n\nEOF</span>\n\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;JDK 设置完成，需要你手动设置：source ~/.zshrc&quot;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-jdk-online" tabindex="-1"><a class="header-anchor" href="#install-jdk-online" aria-hidden="true">#</a> install_jdk_online</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断常见的文件夹是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> /opt/setups\n<span class="token keyword">fi</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/usr/program&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> /usr/program\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;下载 JDK&quot;</span>\n\n<span class="token builtin class-name">cd</span> /opt/setups\n<span class="token function">wget</span> -c --header <span class="token string">&quot;Cookie: oraclelicense=accept-securebackup-cookie&quot;</span> http://download.oracle.com/otn-pub/java/jdk/8u151-b12/e758a0de34e24606bca991d704f6dcbf/jdk-8u151-linux-x64.tar.gz\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -f <span class="token string">&quot;/opt/setups/jdk-8u151-linux-x64.tar.gz&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;JDK 下载失败，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;JDK 下载成功，开始解压 JDK&quot;</span>\n<span class="token function">tar</span> -zxf jdk-8u151-linux-x64.tar.gz\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups/jdk1.8.0_151&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;JDK 解压失败，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;JDK 解压包移到 /usr/program/ 目录下&quot;</span>\n<span class="token function">mv</span> jdk1.8.0_151/ /usr/program/\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;JDK 写入系统变量到 zshrc&quot;</span>\n\n<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;&gt;</span> ~/.zshrc</span>\n\n# JDK\nJAVA_HOME=/usr/local/jdk1.8.0_151\nJRE_HOME=\\<span class="token variable">$JAVA_HOME</span>/jre\nPATH=\\<span class="token environment constant">$PATH</span>:\\<span class="token variable">$JAVA_HOME</span>/bin\nCLASSPATH=.:\\<span class="token variable">$JAVA_HOME</span>/lib/dt.jar:\\<span class="token variable">$JAVA_HOME</span>/lib/tools.jar\nexport JAVA_HOME\nexport JRE_HOME\nexport PATH\nexport CLASSPATH\nEOF</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;JDK 设置完成，需要你手动设置：source ~/.zshrc&quot;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-maven-offline-to-bash" tabindex="-1"><a class="header-anchor" href="#install-maven-offline-to-bash" aria-hidden="true">#</a> install_maven_offline_to_bash</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断常见的文件夹是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> /opt/setups\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断 Maven 压缩包是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -f <span class="token string">&quot;/opt/setups/apache-maven-3.5.4-bin.tar.gz&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;Maven 压缩包不存在&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;开始解压 Maven&quot;</span>\n<span class="token builtin class-name">cd</span> /opt/setups <span class="token punctuation">;</span> <span class="token function">tar</span> -zxf apache-maven-3.5.4-bin.tar.gz\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups/apache-maven-3.5.4&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;Maven 解压失败，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;Maven 解压包移到 /usr/local/ 目录下&quot;</span>\n<span class="token function">mv</span> apache-maven-3.5.4/ /usr/local/\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;Maven 写入系统变量到 profile&quot;</span>\n\n<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;&gt;</span> /etc/profile</span>\n\n# Maven\nM3_HOME=/usr/local/apache-maven-3.5.4\nMAVEN_HOME=/usr/local/apache-maven-3.5.4\nPATH=\\<span class="token environment constant">$PATH</span>:\\<span class="token variable">$M3_HOME</span>/bin\nMAVEN_OPTS=&quot;-Xms256m -Xmx356m&quot;\nexport M3_HOME\nexport MAVEN_HOME\nexport PATH\nexport MAVEN_OPTS\n\nEOF</span>\n\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;Maven 设置完成，需要你手动设置：source /etc/profile&quot;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-maven-offline-to-zsh" tabindex="-1"><a class="header-anchor" href="#install-maven-offline-to-zsh" aria-hidden="true">#</a> install_maven_offline_to_zsh</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断常见的文件夹是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> /opt/setups\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断 Maven 压缩包是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -f <span class="token string">&quot;/opt/setups/apache-maven-3.5.4-bin.tar.gz&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;Maven 压缩包不存在&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;开始解压 Maven&quot;</span>\n<span class="token builtin class-name">cd</span> /opt/setups <span class="token punctuation">;</span> <span class="token function">tar</span> -zxf apache-maven-3.5.4-bin.tar.gz\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups/apache-maven-3.5.4&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;Maven 解压失败，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;Maven 解压包移到 /usr/local/ 目录下&quot;</span>\n<span class="token function">mv</span> apache-maven-3.5.4/ /usr/local/\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;Maven 写入系统变量到 zshrc&quot;</span>\n\n<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;&gt;</span> ~/.zshrc</span>\n\n# Maven\nM3_HOME=/usr/local/apache-maven-3.5.4\nMAVEN_HOME=/usr/local/apache-maven-3.5.4\nPATH=\\<span class="token environment constant">$PATH</span>:\\<span class="token variable">$M3_HOME</span>/bin\nMAVEN_OPTS=&quot;-Xms256m -Xmx356m&quot;\nexport M3_HOME\nexport MAVEN_HOME\nexport PATH\nexport MAVEN_OPTS\n\nEOF</span>\n\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;Maven 设置完成，需要你手动设置：source ~/.zshrc&quot;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-mycat-offline" tabindex="-1"><a class="header-anchor" href="#install-mycat-offline" aria-hidden="true">#</a> install_mycat_offline</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断常见的文件夹是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> /opt/setups\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断是否有 JDK 环境&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> -z <span class="token variable">$JAVA_HOME</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>  \n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;没有 JAVA_HOME 环境变量&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断 /opt 目录下 mycat 压缩包是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -f <span class="token string">&quot;/opt/setups/Mycat-server-1.6-RELEASE-20161028204710-linux.tar.gz&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;mycat 压缩包是否存在不存在&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;解压压缩包&quot;</span>\n\n<span class="token builtin class-name">cd</span> /opt/setups <span class="token punctuation">;</span> <span class="token function">tar</span> -zxf Mycat-server-1.6-RELEASE-20161028204710-linux.tar.gz\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;把解压后目录移到 /usr/local/ 目录下&quot;</span>\n<span class="token function">mv</span> /opt/setups/mycat /usr/local/\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;写入系统变量到 zshrc&quot;</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&#39;MYCAT_HOME=/usr/local/mycat&#39;</span> <span class="token operator">&gt;&gt;</span> ~/.zshrc  \n<span class="token builtin class-name">echo</span> <span class="token string">&#39;PATH=$PATH:$MYCAT_HOME/bin&#39;</span> <span class="token operator">&gt;&gt;</span> ~/.zshrc  \n<span class="token builtin class-name">echo</span> <span class="token string">&#39;export MYCAT_HOME&#39;</span> <span class="token operator">&gt;&gt;</span> ~/.zshrc  \n<span class="token builtin class-name">echo</span> <span class="token string">&#39;export PATH&#39;</span> <span class="token operator">&gt;&gt;</span> ~/.zshrc\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;mycat 设置完成，需要你手动设置：source ~/.zshrc&quot;</span>\n\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-mysql5-6-offline-centos6" tabindex="-1"><a class="header-anchor" href="#install-mysql5-6-offline-centos6" aria-hidden="true">#</a> install_mysql5.6_offline_centos6</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装 mysql 开始&quot;</span>\n\n<span class="token builtin class-name">cd</span> /opt/setups\n\n<span class="token function">tar</span> zxvf mysql-5.6.35.tar.gz\n\n<span class="token function">mv</span> /opt/setups/mysql-5.6.35 /usr/program/\n\nyum <span class="token function">install</span> -y <span class="token function">make</span> gcc-c++ cmake bison-devel ncurses-devel\n\n<span class="token builtin class-name">cd</span> /usr/program/mysql-5.6.35/\n\n<span class="token function">mkdir</span> -p /usr/program/mysql/data\n\ncmake -DCMAKE_INSTALL_PREFIX<span class="token operator">=</span>/usr/program/mysql -DMYSQL_DATADIR<span class="token operator">=</span>/usr/program/mysql/data -DMYSQL_UNIX_ADDR<span class="token operator">=</span>/tmp/mysql.sock -DDEFAULT_CHARSET<span class="token operator">=</span>utf8 -DDEFAULT_COLLATION<span class="token operator">=</span>utf8_general_ci -DWITH_EXTRA_CHARSETS:STRING<span class="token operator">=</span>utf8 -DWITH_MYISAM_STORAGE_ENGINE<span class="token operator">=</span><span class="token number">1</span> -DWITH_INNOBASE_STORAGE_ENGINE<span class="token operator">=</span><span class="token number">1</span> -DENABLED_LOCAL_INFILE<span class="token operator">=</span><span class="token number">1</span>\n\n<span class="token function">make</span>\n\n<span class="token function">make</span> <span class="token function">install</span>\n\n<span class="token function">cp</span> /usr/program/mysql-5.6.35/support-files/mysql.server /etc/init.d/mysql\n\n<span class="token function">chmod</span> <span class="token number">755</span> /etc/init.d/mysql\n\n<span class="token function">chkconfig</span> mysql on\n\n<span class="token function">cp</span> /usr/program/mysql-5.6.35/support-files/my-default.cnf /etc/my.cnf\n\n<span class="token function">rm</span> -rf /usr/program/mysql-5.6.35/\n\n<span class="token function">groupadd</span> mysql\n\n<span class="token function">useradd</span> -g mysql mysql -s /bin/false\n\n<span class="token function">chown</span> -R mysql:mysql /usr/program/mysql/data\n\n/usr/program/mysql/scripts/mysql_install_db --basedir<span class="token operator">=</span>/usr/program/mysql --datadir<span class="token operator">=</span>/usr/program/mysql/data --skip-name-resolve --user<span class="token operator">=</span>mysql\n\n<span class="token function">ln</span> -s /usr/program/mysql/bin/mysql /usr/bin\n\n<span class="token function">ln</span> -s /usr/program/mysql/bin/mysqladmin /usr/bin\n\n<span class="token function">ln</span> -s /usr/program/mysql/bin/mysqldump /usr/bin\n\n<span class="token function">ln</span> -s /usr/program/mysql/bin/mysqlslap /usr/bin\n\niptables -I INPUT -p tcp -m tcp --dport <span class="token number">3306</span> -j ACCEPT\n\n<span class="token function">service</span> iptables save\n\n<span class="token function">service</span> iptables restart\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装 mysql 结束，现在需要手动设置防火墙和禁用 selinux.&quot;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-mysql5-6-offline-centos7" tabindex="-1"><a class="header-anchor" href="#install-mysql5-6-offline-centos7" aria-hidden="true">#</a> install_mysql5.6_offline_centos7</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装 mysql 开始&quot;</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断常见的文件夹是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> /opt/setups\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断 JDK 压缩包是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -f <span class="token string">&quot;/opt/setups/mysql-5.6.35.tar.gz&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;mysql 压缩包不存在&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">cd</span> /opt/setups\n\n<span class="token function">tar</span> zxvf mysql-5.6.35.tar.gz\n\n<span class="token function">mv</span> /opt/setups/mysql-5.6.35 /usr/local/\n\nyum <span class="token function">install</span> -y <span class="token function">make</span> gcc-c++ cmake bison-devel ncurses-devel autoconf \n\n<span class="token builtin class-name">cd</span> /usr/local/mysql-5.6.35/\n\n<span class="token function">mkdir</span> -p /usr/local/mysql/data\n\ncmake -DCMAKE_INSTALL_PREFIX<span class="token operator">=</span>/usr/local/mysql -DMYSQL_DATADIR<span class="token operator">=</span>/usr/local/mysql/data -DMYSQL_UNIX_ADDR<span class="token operator">=</span>/tmp/mysql.sock -DDEFAULT_CHARSET<span class="token operator">=</span>utf8 -DDEFAULT_COLLATION<span class="token operator">=</span>utf8_general_ci -DWITH_EXTRA_CHARSETS:STRING<span class="token operator">=</span>utf8 -DWITH_MYISAM_STORAGE_ENGINE<span class="token operator">=</span><span class="token number">1</span> -DWITH_INNOBASE_STORAGE_ENGINE<span class="token operator">=</span><span class="token number">1</span> -DENABLED_LOCAL_INFILE<span class="token operator">=</span><span class="token number">1</span>\n\n<span class="token function">make</span>\n\n<span class="token function">make</span> <span class="token function">install</span>\n\n<span class="token function">cp</span> /usr/local/mysql-5.6.35/support-files/mysql.server /etc/init.d/mysql\n\n<span class="token function">chmod</span> <span class="token number">755</span> /etc/init.d/mysql\n\n<span class="token function">chkconfig</span> mysql on\n\n<span class="token function">cp</span> /usr/local/mysql-5.6.35/support-files/my-default.cnf /etc/my.cnf\n\n<span class="token function">rm</span> -rf /usr/local/mysql-5.6.35/\n\n<span class="token function">groupadd</span> mysql\n\n<span class="token function">useradd</span> -g mysql mysql -s /bin/false\n\n<span class="token function">chown</span> -R mysql:mysql /usr/local/mysql/data\n\n/usr/local/mysql/scripts/mysql_install_db --basedir<span class="token operator">=</span>/usr/local/mysql --datadir<span class="token operator">=</span>/usr/local/mysql/data --skip-name-resolve --user<span class="token operator">=</span>mysql\n\n<span class="token function">ln</span> -s /usr/local/mysql/bin/mysql /usr/bin\n\n<span class="token function">ln</span> -s /usr/local/mysql/bin/mysqladmin /usr/bin\n\n<span class="token function">ln</span> -s /usr/local/mysql/bin/mysqldump /usr/bin\n\n<span class="token function">ln</span> -s /usr/local/mysql/bin/mysqlslap /usr/bin\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;防火墙放行 3306 端口&quot;</span>\nsystemctl restart firewalld.service\nfirewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">3306</span>/tcp --permanent\nfirewall-cmd --reload\nsystemctl stop firewalld.service\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装 mysql 结束，现在需要手动设置防火墙和禁用 selinux.&quot;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-mysql5-7-offline-centos7" tabindex="-1"><a class="header-anchor" href="#install-mysql5-7-offline-centos7" aria-hidden="true">#</a> install_mysql5.7_offline_centos7</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装 mysql 开始&quot;</span>\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;必须准备两个文件：mysql-5.7.21.tar.gz 和 boost_1_59_0.tar.gz&quot;</span>\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;mysql 5.7 依赖 boost，官网说明：https://dev.mysql.com/doc/mysql-sourcebuild-excerpt/5.7/en/source-installation.html&quot;</span>\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;boost 下载地址（79M）：http://www.boost.org/users/history/version_1_59_0.html&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -f <span class="token string">&quot;/opt/setups/mysql-5.7.21.tar.gz&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;缺少 mysql-5.7.21.tar.gz 文件，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -f <span class="token string">&quot;/opt/setups/boost_1_59_0.tar.gz&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;缺少 boost_1_59_0.tar.gz 文件，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">cd</span> /opt/setups\n\n<span class="token function">tar</span> zxvf mysql-5.7.21.tar.gz\n\n<span class="token function">mv</span> /opt/setups/mysql-5.7.21 /usr/local/\n\n<span class="token function">tar</span> zxvf boost_1_59_0.tar.gz\n\n<span class="token function">mv</span> /opt/setups/boost_1_59_0 /usr/local/\n\nyum <span class="token function">install</span> -y <span class="token function">make</span> gcc-c++ cmake bison-devel ncurses-devel\n\n<span class="token builtin class-name">cd</span> /usr/local/mysql-5.7.21/\n\n<span class="token function">mkdir</span> -p /usr/local/mysql/data\n\ncmake -DCMAKE_INSTALL_PREFIX<span class="token operator">=</span>/usr/local/mysql -DMYSQL_DATADIR<span class="token operator">=</span>/usr/local/mysql/data -DWITH_BOOST<span class="token operator">=</span>/usr/local/boost_1_59_0 -DMYSQL_UNIX_ADDR<span class="token operator">=</span>/tmp/mysql.sock -DDEFAULT_CHARSET<span class="token operator">=</span>utf8 -DDEFAULT_COLLATION<span class="token operator">=</span>utf8_general_ci -DWITH_EXTRA_CHARSETS:STRING<span class="token operator">=</span>utf8 -DWITH_MYISAM_STORAGE_ENGINE<span class="token operator">=</span><span class="token number">1</span> -DWITH_INNOBASE_STORAGE_ENGINE<span class="token operator">=</span><span class="token number">1</span> -DENABLED_LOCAL_INFILE<span class="token operator">=</span><span class="token number">1</span>\n\n<span class="token function">make</span>\n\n<span class="token function">make</span> <span class="token function">install</span>\n\n<span class="token function">cp</span> /usr/local/mysql-5.7.21/support-files/mysql.server /etc/init.d/mysql\n\n<span class="token function">chmod</span> <span class="token number">755</span> /etc/init.d/mysql\n\n<span class="token function">chkconfig</span> mysql on\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;mysql 5.7 这个文件没了，需要自己创建一个&quot;</span>\n\n<span class="token function">cp</span> /usr/local/mysql-5.7.21/support-files/my-default.cnf /etc/my.cnf\n\n<span class="token function">rm</span> -rf /usr/local/mysql-5.7.21/\n\n<span class="token function">groupadd</span> mysql\n\n<span class="token function">useradd</span> -g mysql mysql -s /bin/false\n\n<span class="token function">chown</span> -R mysql:mysql /usr/local/mysql/data\n\n/usr/local/mysql/scripts/mysql_install_db --basedir<span class="token operator">=</span>/usr/local/mysql --datadir<span class="token operator">=</span>/usr/local/mysql/data --skip-name-resolve --user<span class="token operator">=</span>mysql\n\n<span class="token function">ln</span> -s /usr/local/mysql/bin/mysql /usr/bin\n\n<span class="token function">ln</span> -s /usr/local/mysql/bin/mysqladmin /usr/bin\n\n<span class="token function">ln</span> -s /usr/local/mysql/bin/mysqldump /usr/bin\n\n<span class="token function">ln</span> -s /usr/local/mysql/bin/mysqlslap /usr/bin\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;防火墙放行 3306 端口&quot;</span>\nsystemctl restart firewalld.service\nfirewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">3306</span>/tcp --permanent\nfirewall-cmd --reload\nsystemctl stop firewalld.service\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装 mysql 结束，现在需要手动设置防火墙和禁用 selinux.&quot;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-nginx-centos6" tabindex="-1"><a class="header-anchor" href="#install-nginx-centos6" aria-hidden="true">#</a> install_nginx_centos6</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装 nginx&quot;</span>\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断常见的文件夹是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> /opt/setups\n<span class="token keyword">fi</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/usr/program&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> /usr/program\n<span class="token keyword">fi</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/usr/local/nginx&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> -p /usr/local/nginx\n<span class="token keyword">fi</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/var/log/nginx&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> -p /var/log/nginx\n<span class="token keyword">fi</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/var/temp/nginx&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> -p /var/temp/nginx\n<span class="token keyword">fi</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/var/lock/nginx&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> -p /var/lock/nginx\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;下载 Nginx&quot;</span>\n\n<span class="token builtin class-name">cd</span> /opt/setups\n<span class="token function">wget</span> https://nginx.org/download/nginx-1.12.2.tar.gz\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -f <span class="token string">&quot;/opt/setups/nginx-1.12.2.tar.gz&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;Nginx 下载失败，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;Nginx 下载成功，开始解压 Nginx&quot;</span>\n<span class="token function">tar</span> -zxf nginx-1.12.2.tar.gz\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups/nginx-1.12.2&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;Nginx 解压失败，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装源码安装依赖&quot;</span>\nyum <span class="token function">install</span> -y gcc gcc-c++ pcre pcre-devel zlib zlib-devel openssl openssl-devel\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;开始安装 Nginx&quot;</span>\n<span class="token builtin class-name">cd</span> nginx-1.12.2/\n\n./configure --prefix<span class="token operator">=</span>/usr/local/nginx --pid-path<span class="token operator">=</span>/var/local/nginx/nginx.pid --lock-path<span class="token operator">=</span>/var/lock/nginx/nginx.lock --error-log-path<span class="token operator">=</span>/var/log/nginx/error.log --http-log-path<span class="token operator">=</span>/var/log/nginx/access.log --with-http_gzip_static_module --http-client-body-temp-path<span class="token operator">=</span>/var/temp/nginx/client --http-proxy-temp-path<span class="token operator">=</span>/var/temp/nginx/proxy --http-fastcgi-temp-path<span class="token operator">=</span>/var/temp/nginx/fastcgi --http-uwsgi-temp-path<span class="token operator">=</span>/var/temp/nginx/uwsgi --with-http_ssl_module --http-scgi-temp-path<span class="token operator">=</span>/var/temp/nginx/scgi\n<span class="token function">make</span>\n<span class="token function">make</span> <span class="token function">install</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;防火墙放行 80 端口&quot;</span>\niptables -I INPUT -p tcp -m tcp --dport <span class="token number">80</span> -j ACCEPT\n<span class="token function">service</span> iptables save\n<span class="token function">service</span> iptables restart\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;启动 Nginx&quot;</span>\n/usr/local/nginx/sbin/nginx\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-nginx-centos7" tabindex="-1"><a class="header-anchor" href="#install-nginx-centos7" aria-hidden="true">#</a> install_nginx_centos7</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装 nginx&quot;</span>\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断常见的文件夹是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> /opt/setups\n<span class="token keyword">fi</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/usr/local/nginx&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> -p /usr/local/nginx\n<span class="token keyword">fi</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/var/log/nginx&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> -p /var/log/nginx\n<span class="token keyword">fi</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/var/temp/nginx&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> -p /var/temp/nginx\n<span class="token keyword">fi</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/var/lock/nginx&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> -p /var/lock/nginx\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;下载 Nginx&quot;</span>\n\n<span class="token builtin class-name">cd</span> /opt/setups\n<span class="token function">wget</span> https://nginx.org/download/nginx-1.14.0.tar.gz\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -f <span class="token string">&quot;/opt/setups/nginx-1.14.0.tar.gz&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;Nginx 下载失败，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;Nginx 下载成功，开始解压 Nginx&quot;</span>\n<span class="token function">tar</span> -zxf nginx-1.14.0.tar.gz\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups/nginx-1.14.0&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;Nginx 解压失败，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装源码安装依赖&quot;</span>\nyum <span class="token function">install</span> -y gcc gcc-c++ pcre pcre-devel zlib zlib-devel openssl openssl-devel\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;开始安装 Nginx&quot;</span>\n<span class="token builtin class-name">cd</span> nginx-1.14.0/\n\n./configure --prefix<span class="token operator">=</span>/usr/local/nginx --pid-path<span class="token operator">=</span>/var/local/nginx/nginx.pid --lock-path<span class="token operator">=</span>/var/lock/nginx/nginx.lock --error-log-path<span class="token operator">=</span>/var/log/nginx/error.log --http-log-path<span class="token operator">=</span>/var/log/nginx/access.log --with-http_gzip_static_module --http-client-body-temp-path<span class="token operator">=</span>/var/temp/nginx/client --http-proxy-temp-path<span class="token operator">=</span>/var/temp/nginx/proxy --http-fastcgi-temp-path<span class="token operator">=</span>/var/temp/nginx/fastcgi --http-uwsgi-temp-path<span class="token operator">=</span>/var/temp/nginx/uwsgi --with-http_ssl_module --http-scgi-temp-path<span class="token operator">=</span>/var/temp/nginx/scgi\n<span class="token function">make</span>\n<span class="token function">make</span> <span class="token function">install</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;防火墙放行 80 端口&quot;</span>\nsystemctl restart firewalld.service\nfirewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">80</span>/tcp --permanent\nfirewall-cmd --reload\nsystemctl restart firewalld.service\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;启动 Nginx&quot;</span>\n/usr/local/nginx/sbin/nginx\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-redis-centos6" tabindex="-1"><a class="header-anchor" href="#install-redis-centos6" aria-hidden="true">#</a> install_redis_centos6</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装 redis&quot;</span>\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断常见的文件夹是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> /opt/setups\n<span class="token keyword">fi</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/usr/program&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> /usr/program\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;下载 redis&quot;</span>\n\n<span class="token builtin class-name">cd</span> /opt/setups\n<span class="token function">wget</span> http://download.redis.io/releases/redis-4.0.6.tar.gz\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -f <span class="token string">&quot;/opt/setups/redis-4.0.6.tar.gz&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;redis 下载失败，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;reids 下载成功&quot;</span>\n\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装开始&quot;</span>\n\nyum <span class="token function">install</span> -y gcc-c++ tcl\n\n<span class="token builtin class-name">cd</span> /opt/setups\n\n<span class="token function">tar</span> zxvf redis-4.0.6.tar.gz\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups/redis-4.0.6&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;redis 解压失败，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token function">mv</span> redis-4.0.6/ /usr/program/\n\n<span class="token builtin class-name">cd</span> /usr/program/redis-4.0.6\n\n<span class="token function">make</span>\n\n<span class="token function">make</span> <span class="token function">install</span>\n\n<span class="token function">cp</span> /usr/program/redis-4.0.6/redis.conf /etc/\n\n<span class="token function">sed</span> -i <span class="token string">&#39;s/daemonize no/daemonize yes/g&#39;</span> /etc/redis.conf\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;/usr/local/bin/redis-server /etc/redis.conf&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/rc.local\n\niptables -I INPUT -p tcp -m tcp --dport <span class="token number">6379</span> -j ACCEPT\n\n<span class="token function">service</span> iptables save\n\n<span class="token function">service</span> iptables restart\n\n<span class="token function">rm</span> -rf /usr/program/redis-4.0.6\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装结束&quot;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-redis-centos7" tabindex="-1"><a class="header-anchor" href="#install-redis-centos7" aria-hidden="true">#</a> install_redis_centos7</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装 redis&quot;</span>\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断常见的文件夹是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> /opt/setups\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;下载 redis&quot;</span>\n\n<span class="token builtin class-name">cd</span> /opt/setups\n<span class="token function">wget</span> http://download.redis.io/releases/redis-4.0.6.tar.gz\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -f <span class="token string">&quot;/opt/setups/redis-4.0.6.tar.gz&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;redis 下载失败，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;reids 下载成功&quot;</span>\n\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装开始&quot;</span>\n\nyum <span class="token function">install</span> -y gcc-c++ tcl\n\n<span class="token builtin class-name">cd</span> /opt/setups\n\n<span class="token function">tar</span> zxvf redis-4.0.6.tar.gz\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups/redis-4.0.6&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;redis 解压失败，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token function">mv</span> redis-4.0.6/ /usr/local/\n\n<span class="token builtin class-name">cd</span> /usr/local/redis-4.0.6\n\n<span class="token function">make</span>\n\n<span class="token function">make</span> <span class="token function">install</span>\n\n<span class="token function">cp</span> /usr/local/redis-4.0.6/redis.conf /etc/\n\n<span class="token function">sed</span> -i <span class="token string">&#39;s/daemonize no/daemonize yes/g&#39;</span> /etc/redis.conf\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;/usr/local/bin/redis-server /etc/redis.conf&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/rc.local\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;防火墙放行 6379 端口&quot;</span>\nfirewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">6379</span>/tcp --permanent\nfirewall-cmd --reload\n\n<span class="token function">rm</span> -rf /usr/local/redis-4.0.6\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装结束&quot;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-tomcat-centos6" tabindex="-1"><a class="header-anchor" href="#install-tomcat-centos6" aria-hidden="true">#</a> install_tomcat_centos6</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断常见的文件夹是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> /opt/setups\n<span class="token keyword">fi</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/usr/program&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> /usr/program\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;下载 Tomcat&quot;</span>\n\n<span class="token builtin class-name">cd</span> /opt/setups\n<span class="token function">wget</span> http://mirror.bit.edu.cn/apache/tomcat/tomcat-8/v8.0.47/bin/apache-tomcat-8.0.47.tar.gz\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -f <span class="token string">&quot;/opt/setups/apache-tomcat-8.0.47.tar.gz&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;Tomcat 下载失败，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;Tomcat 下载成功，开始解压 Tomcat&quot;</span>\n<span class="token function">tar</span> -zxf apache-tomcat-8.0.47.tar.gz\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups/apache-tomcat-8.0.47&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;Tomcat 解压失败，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;Tomcat 解压包移到 /usr/program/ 目录下&quot;</span>\n<span class="token function">mv</span> apache-tomcat-8.0.47/ /usr/program/\n<span class="token function">mv</span> /usr/program/apache-tomcat-8.0.47/ /usr/program/tomcat8/\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;防火墙放行 8080 端口&quot;</span>\niptables -I INPUT -p tcp -m tcp --dport <span class="token number">8080</span> -j ACCEPT\n<span class="token function">service</span> iptables save\n<span class="token function">service</span> iptables restart\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;运行 Tomcat&quot;</span>\n<span class="token function">sh</span> /usr/program/tomcat8/bin/startup.sh <span class="token punctuation">;</span> <span class="token function">tail</span> -200f /usr/program/tomcat8/logs/catalina.out\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-tomcat-centos7" tabindex="-1"><a class="header-anchor" href="#install-tomcat-centos7" aria-hidden="true">#</a> install_tomcat_centos7</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断常见的文件夹是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> /opt/setups\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;下载 Tomcat&quot;</span>\n\n<span class="token builtin class-name">cd</span> /opt/setups\n<span class="token function">wget</span> http://apache.fayea.com/tomcat/tomcat-8/v8.0.46/bin/apache-tomcat-8.0.46.tar.gz\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -f <span class="token string">&quot;/opt/setups/apache-tomcat-8.0.46.tar.gz&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;Tomcat 下载失败，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;Tomcat 下载成功，开始解压 Tomcat&quot;</span>\n<span class="token function">tar</span> -zxf apache-tomcat-8.0.46.tar.gz\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups/apache-tomcat-8.0.46&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;Tomcat 解压失败，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;Tomcat 解压包移到 /usr/local/ 目录下&quot;</span>\n<span class="token function">mv</span> apache-tomcat-8.0.46/ /usr/local/\n<span class="token function">mv</span> /usr/local/apache-tomcat-8.0.46/ /usr/local/tomcat8/\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;防火墙放行 8080 端口&quot;</span>\nfirewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">8080</span>/tcp --permanent\nfirewall-cmd --reload\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;运行 Tomcat&quot;</span>\n<span class="token function">sh</span> /usr/local/tomcat8/bin/startup.sh <span class="token punctuation">;</span> <span class="token function">tail</span> -200f /usr/local/tomcat8/logs/catalina.out\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="install-tomcat-offline-centos7" tabindex="-1"><a class="header-anchor" href="#install-tomcat-offline-centos7" aria-hidden="true">#</a> install_tomcat_offline_centos7</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断常见的文件夹是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token function">mkdir</span> /opt/setups\n<span class="token keyword">fi</span>\n\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;判断 tomcat 压缩包是否存在&quot;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -f <span class="token string">&quot;/opt/setups/apache-tomcat-8.0.46.tar.gz&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;JDK 压缩包不存在&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n\n<span class="token builtin class-name">cd</span> /opt/setups\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;开始解压 Tomcat&quot;</span>\n\n<span class="token function">tar</span> -zxf apache-tomcat-8.0.46.tar.gz\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;/opt/setups/apache-tomcat-8.0.46&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n\t<span class="token builtin class-name">echo</span> <span class="token string">&quot;Tomcat 解压失败，结束脚本&quot;</span>\n\t<span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;Tomcat 解压包移到 /usr/local/ 目录下&quot;</span>\n<span class="token function">mv</span> apache-tomcat-8.0.46/ /usr/local/\n<span class="token function">mv</span> /usr/local/apache-tomcat-8.0.46/ /usr/local/tomcat8/\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;防火墙放行 8080 端口&quot;</span>\nfirewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">8080</span>/tcp --permanent\nfirewall-cmd --reload\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;运行 Tomcat&quot;</span>\n<span class="token function">sh</span> /usr/local/tomcat8/bin/startup.sh <span class="token punctuation">;</span> <span class="token function">tail</span> -200f /usr/local/tomcat8/logs/catalina.out\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mysql-backup" tabindex="-1"><a class="header-anchor" href="#mysql-backup" aria-hidden="true">#</a> mysql_backup</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>\n\n\n<span class="token assign-left variable">backupDatetime</span><span class="token operator">=</span><span class="token variable">$1</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$backupDatetime</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token keyword">then</span>\n    <span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\\033">\\033</span>[0;31m 请输入备份日期 <span class="token entity" title="\\033">\\033</span>[0m&quot;</span>\n    <span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;备份日期 = <span class="token variable">$backupDatetime</span>&quot;</span>\n\n/usr/bin/mysqldump -u root --password<span class="token operator">=</span><span class="token number">123456</span> 数据库名 <span class="token operator">&gt;</span> /opt/mydb-<span class="token string">&quot;<span class="token variable">$backupDatetime</span>&quot;</span>.sql\n\n\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="repo-install-centos6" tabindex="-1"><a class="header-anchor" href="#repo-install-centos6" aria-hidden="true">#</a> repo_install_centos6</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>\n<span class="token comment"># 本文原内容来自：https://github.com/judasn/Linux-Tutorial/blob/master/CentOS-Extra-Packages.md</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;源设置开始&quot;</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;备份默认源设置&quot;</span>\n<span class="token function">sudo</span> <span class="token function">mv</span> /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup\n<span class="token builtin class-name">cd</span> /etc/yum.repos.d/\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;下载网易 centos6 源&quot;</span>\n<span class="token function">sudo</span> <span class="token function">wget</span> http://mirrors.163.com/.help/CentOS6-Base-163.repo\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装网易 centos6 源&quot;</span>\n<span class="token function">sudo</span> <span class="token function">mv</span> CentOS6-Base-163.repo CentOS-Base.repo\n<span class="token function">rpm</span> --import /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;清除缓存后更新程序&quot;</span>\n<span class="token function">sudo</span> yum clean all\n<span class="token function">sudo</span> yum makecache\n<span class="token function">sudo</span> yum update -y\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;使用第三方源&quot;</span>\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装 EPEL 源&quot;</span>\n<span class="token function">sudo</span> yum <span class="token function">install</span> -y epel-release\n<span class="token function">rpm</span> --import /etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;安装 RepoForge 源&quot;</span>\n<span class="token function">wget</span> http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm\n<span class="token function">sudo</span> <span class="token function">rpm</span> -ivh rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm\n<span class="token function">sudo</span> <span class="token function">rpm</span> --import /etc/pki/rpm-gpg/RPM-GPG-KEY-rpmforge-dag\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;清除缓存后更新程序&quot;</span>\n<span class="token function">sudo</span> yum clean all\n<span class="token function">sudo</span> yum makecache\n<span class="token function">sudo</span> yum update -y\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;测试安装 htop&quot;</span>\n<span class="token function">sudo</span> yum <span class="token function">install</span> -y <span class="token function">htop</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;完成源设置&quot;</span>\n\n\n\n\n\n\n\n\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="shell-for" tabindex="-1"><a class="header-anchor" href="#shell-for" aria-hidden="true">#</a> shell-for</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>\n\n<span class="token comment"># 循环总次数</span>\n<span class="token assign-left variable">totalDegree</span><span class="token operator">=</span><span class="token variable">$1</span>\n\n<span class="token comment"># 如果没有传参，则默认值是 10</span>\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$totalDegree</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token keyword">then</span>\n    <span class="token assign-left variable">totalDegree</span><span class="token operator">=</span><span class="token number">10</span>\n<span class="token keyword">fi</span>\n\n<span class="token keyword">for</span><span class="token variable"><span class="token punctuation">((</span>timeTemp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> timeTemp <span class="token operator">&lt;=</span> $totalDegree<span class="token punctuation">;</span> timeTemp <span class="token operator">=</span> timeTemp <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">))</span></span>\n<span class="token keyword">do</span>\n    <span class="token builtin class-name">echo</span> <span class="token string">&quot;timeTemp=<span class="token variable">$timeTemp</span>&quot;</span>\n<span class="token keyword">done</span>\n\n\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="shell-with-param-demo" tabindex="-1"><a class="header-anchor" href="#shell-with-param-demo" aria-hidden="true">#</a> shell-with-param-demo</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>\n\n\n<span class="token assign-left variable">methodParam</span><span class="token operator">=</span><span class="token variable">$1</span>\n<span class="token assign-left variable">SpringBoot</span><span class="token operator">=</span><span class="token variable">$2</span>\n<span class="token assign-left variable">SpringBootPath</span><span class="token operator">=</span><span class="token variable">$3</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$methodParam</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token keyword">then</span>\n    <span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\\033">\\033</span>[0;31m 未输入操作名 <span class="token entity" title="\\033">\\033</span>[0m  <span class="token entity" title="\\033">\\033</span>[0;34m {start|stop|restart|status} <span class="token entity" title="\\033">\\033</span>[0m&quot;</span>\n    <span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$SpringBoot</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token keyword">then</span>\n    <span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\\033">\\033</span>[0;31m 未输入应用名 <span class="token entity" title="\\033">\\033</span>[0m&quot;</span>\n    <span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$SpringBootPath</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token keyword">then</span>\n    <span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\\033">\\033</span>[0;31m 未输入应用路径 <span class="token entity" title="\\033">\\033</span>[0m&quot;</span>\n    <span class="token builtin class-name">exit</span> <span class="token number">1</span>\n<span class="token keyword">fi</span>\n\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;操作名 = <span class="token variable">$methodParam</span>&quot;</span>\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;应用名 = <span class="token variable">$2</span>&quot;</span>\n<span class="token builtin class-name">echo</span> <span class="token string">&quot;应用路径 = <span class="token variable">$3</span>&quot;</span>\n\n<span class="token keyword">function</span> <span class="token function-name function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ps</span> -ef <span class="token operator">|</span><span class="token function">grep</span> java<span class="token operator">|</span><span class="token function">grep</span> $SpringBoot<span class="token operator">|</span><span class="token function">grep</span> -v <span class="token function">grep</span><span class="token operator">|</span><span class="token function">wc</span> -l<span class="token variable">`</span></span>\n    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>\n        <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$SpringBoot</span> is running...&quot;</span>\n    <span class="token keyword">else</span>\n        <span class="token builtin class-name">echo</span> <span class="token string">&quot;Start <span class="token variable">$SpringBoot</span> success...&quot;</span>\n        <span class="token builtin class-name">cd</span> <span class="token variable">$SpringBootPath</span>\n        <span class="token assign-left variable">BUILD_ID</span><span class="token operator">=</span>dontKillMe <span class="token function">nohup</span> java -jar <span class="token variable">$SpringBoot</span> <span class="token operator">&gt;</span> /opt/run-log.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>\n    <span class="token keyword">fi</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function-name function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Stop <span class="token variable">$SpringBoot</span>&quot;</span>\n    <span class="token assign-left variable">boot_id</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ps</span> -ef <span class="token operator">|</span><span class="token function">grep</span> java<span class="token operator">|</span><span class="token function">grep</span> $SpringBoot<span class="token operator">|</span><span class="token function">grep</span> -v <span class="token function">grep</span><span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&#39;{print $2}&#39;</span><span class="token variable">`</span></span>\n    <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ps</span> -ef <span class="token operator">|</span><span class="token function">grep</span> java<span class="token operator">|</span><span class="token function">grep</span> $SpringBoot<span class="token operator">|</span><span class="token function">grep</span> -v <span class="token function">grep</span><span class="token operator">|</span><span class="token function">wc</span> -l<span class="token variable">`</span></span>\n\n    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>\n        <span class="token function">kill</span> <span class="token variable">$boot_id</span>\n        <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ps</span> -ef <span class="token operator">|</span><span class="token function">grep</span> java<span class="token operator">|</span><span class="token function">grep</span> $SpringBoot<span class="token operator">|</span><span class="token function">grep</span> -v <span class="token function">grep</span><span class="token operator">|</span><span class="token function">wc</span> -l<span class="token variable">`</span></span>\n\n        <span class="token assign-left variable">boot_id</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ps</span> -ef <span class="token operator">|</span><span class="token function">grep</span> java<span class="token operator">|</span><span class="token function">grep</span> $SpringBoot<span class="token operator">|</span><span class="token function">grep</span> -v <span class="token function">grep</span><span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&#39;{print $2}&#39;</span><span class="token variable">`</span></span>\n        <span class="token function">kill</span> -9 <span class="token variable">$boot_id</span>\n    <span class="token keyword">fi</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function-name function">restart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    stop\n    <span class="token function">sleep</span> <span class="token number">2</span>\n    start\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function-name function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ps</span> -ef <span class="token operator">|</span><span class="token function">grep</span> java<span class="token operator">|</span><span class="token function">grep</span> $SpringBoot<span class="token operator">|</span><span class="token function">grep</span> -v <span class="token function">grep</span><span class="token operator">|</span><span class="token function">wc</span> -l<span class="token variable">`</span></span>\n    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>\n        <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$SpringBoot</span> is running...&quot;</span>\n    <span class="token keyword">else</span>\n        <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$SpringBoot</span> is not running...&quot;</span>\n    <span class="token keyword">fi</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">case</span> <span class="token variable">$methodParam</span> <span class="token keyword">in</span>\n    start<span class="token punctuation">)</span>\n    start<span class="token punctuation">;</span><span class="token punctuation">;</span>\n    stop<span class="token punctuation">)</span>\n    stop<span class="token punctuation">;</span><span class="token punctuation">;</span>\n    restart<span class="token punctuation">)</span>\n    restart<span class="token punctuation">;</span><span class="token punctuation">;</span>\n    status<span class="token punctuation">)</span>\n    status<span class="token punctuation">;</span><span class="token punctuation">;</span>\n    *<span class="token punctuation">)</span>\n\n    <span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\\033">\\033</span>[0;31m Usage: <span class="token entity" title="\\033">\\033</span>[0m  <span class="token entity" title="\\033">\\033</span>[0;34m sh  <span class="token variable">$0</span>  {start|stop|restart|status}  {SpringBootJarName} <span class="token entity" title="\\033">\\033</span>[0m<span class="token entity" title="\\033">\\033</span>[0;31m Example: <span class="token entity" title="\\033">\\033</span>[0m<span class="token entity" title="\\033">\\033</span>[0;33m sh  <span class="token variable">$0</span>  start esmart-test.jar <span class="token entity" title="\\033">\\033</span>[0m&quot;</span>\n<span class="token keyword">esac</span>\n\n\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',63)],l={},t=(0,a(83744).Z)(l,[["render",function(n,s){return(0,e.wg)(),(0,e.iD)("div",null,i)}]])}}]);